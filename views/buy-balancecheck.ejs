<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js" integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN" crossorigin="anonymous"></script>
    <link href="style.css" type="text/css" rel="stylesheet">
    <title>Purchase-BalanceCheck</title>
    <script>
        if ( window.history.replaceState ) {
          window.history.replaceState( null, null, window.location.href );
        }
    </script>
</head>
<body class="main-contents">
    <%- include('partials/nav'); %>
    <main class="main-content">
        <h1>Purchase - Balance Check</h1>
        <form action="/searchs" method="get" class="d-flex mt-4">
            <input type="search" name="invoice_number" style="width: 250px;" class="form-control me-2" placeholder="Enter Invoice Number" aria-label="Search" required>
            <button type="submit" class="btn btn-primary">Search</button>
        </form>
        <% if (results && results.length > 0) { %>
          <div class="mt-5">
              <h3>Search results for Invoice Number <%= invoice_number %>:</h3>
              <table class="table table-striped">
                  <thead>
                      <tr>
                          <th>Invoice Number</th>
                          <th>Seller Name</th>
                          <th>Amount</th>
                          <th>Paid Amount</th>
                          <th>Total Balance Left<br><a style="font-size: 10px;">exp. ( -10 ) is over paid rm10</a></th>
                      </tr>
                  </thead>
                  <tbody>
                      <% sell_invoice_data.forEach((invoice) => { %>
                          <tr>
                              <td><%= invoice.Invoice_number %></td>
                              <td><%= invoice.Name %></td>
                              <td><%= total_amount %></td>
                              <td><%= total_paid_amount %></td>
                              <td><%= balance_left %></td>
                          </tr>
                      <% }); %>
                  </tbody>
              </table>
          </div>
      <% } else if (results) { %>
          <div class="mt-5">
              <p>No results found for Invoice Number <%= invoice_number %>.</p>
          </div>
      <% } %>
      
    </main>
</body>
</html>
