<!DOCTYPE html>
<html>
    <head>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
      <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
      <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js" integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN" crossorigin="anonymous"></script>
      <link href="style.css" type="text/css" rel="stylesheet">
      <title>Refund TAB</title>
      <script>
        if ( window.history.replaceState ) {
          window.history.replaceState( null, null, window.location.href );
        }
      </script>
    </head>
    <body class="main-contents">
        <%- include('partials/nav'); %>
        <main class="main-content">
            <h1 style="font-weight: bold;">Refund TAB</h1><br>
            <div style="display: flex;justify-content: space-between;">
                <div>
                    <h3 style="font-weight: bold;font-family:Arial, Helvetica, sans-serif">Refund to buyer</h3>
                    <form action="refund2buyer" method="post" enctype="multipart/form-data" id="refund-to-buyer-form">
                        <div>
                            <div style="display: flex;">
                                <div class="form-group">
                                    <label for="invoice">Invoice:</label>
                                    <input style="width: 180px;margin-left: 5px;" class="form-control" id="invoice-number" type="text" name="invoice">
                                </div>
                                <div class="form-group">
                                    <label for="amount">Amount:</label>
                                    <input style="width: 180px;margin-left: 5px;" class="form-control" type="text" name="amount">
                                </div>
                            </div>
                            <div style="display: flex;">
                                <div class="form-group">
                                    <label for="remarks">Remarks:</label>
                                    <input style="width: 180px;margin-left: 5px;" class="form-control" type="text" name="remarks">
                                </div>
                                <div class="form-group">
                                    <label for="date">Date:</label>
                                    <input style="width: 180px;margin-left: 5px;" class="form-control" type="date" name="date">
                                </div>
                            </div>
                            <br>
                            <button class="btn btn-success" type="submit">Submit</button>
                            <button class="btn btn-danger" type="reset">Reset</button>
                        </div><br>
                        <div>
                            <table class="table table-striped" style="width: 90%;" id="inputTable">
                                <thead>
                                    <tr>
                                        <th>SKU</th>
                                        <th>Product Name</th>
                                        <th>Size US</th>
                                        <th>Quantity</th>
                                        <th>Item Cost</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td><input type="text" name="field1[]" class="form-control"></td>
                                        <td><input type="text" name="field2[]" class="form-control"></td>
                                        <td><input type="text" name="field3[]" class="form-control"></td>
                                        <td><input type="text" name="field4[]" class="form-control"></td>
                                        <td><input type="text" name="field5[]" class="form-control"></td>
                                        <td><button style="width: 75px;" type="button" class="btn btn-primary" id="addRow">ADD</button></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </form>
                    <div>
                        <h2>Refund to Buyer</h2>
                            <table class="table table-striped" style="width: 90%;">
                            <thead>
                                <tr>
                                <th>Invoice</th> 
                                <th>Amount</th>
                                <th>Remarks</th>
                                <th>Date</th>
                                </tr>
                            </thead>
                            <tbody>
                                <% data.refund2BuyerData.forEach(row => { %>
                                <tr>
                                    <td><%= row.invoice %></td>
                                    <td><%= row.amount %></td>
                                    <td><%= row.remarks %></td>
                                    <td><%= row.date ? row.date.toISOString().slice(0,10) : '' %></td>
                                </tr>
                                <% }); %>
                            </tbody>
                        </table>
                    </div>
                </div>
                <div>
                    <h3 style="font-weight: bold;font-family:Arial, Helvetica, sans-serif">Refund from supplier</h3>
                    <form action="refund" method="post" enctype="multipart/form-data">
                        <div>
                            <div style="display: flex;">
                                <div class="form-group">
                                    <label for="invoice">Invoice:</label>
                                    <input style="width: 180px;margin-left: 5px;" class="form-control" id="invoice-number" type="text" name="invoice">
                                </div>
                                <div class="form-group">
                                    <label for="amount">Amount:</label>
                                    <input style="width: 180px;margin-left: 5px;" class="form-control" type="text" name="amount">
                                </div>
                            </div>
                            <div style="display: flex;">
                                <div class="form-group">
                                    <label for="remarks">Remarks:</label>
                                    <input style="width: 180px;margin-left: 5px;" class="form-control" type="text" name="remarks">
                                </div>
                                <div class="form-group">
                                    <label for="date">Date:</label>
                                    <input style="width: 180px;margin-left: 5px;" class="form-control" type="date" name="date">
                                </div>
                            </div>
                            <br>
                            <button class="btn btn-success" type="submit">Submit</button>
                            <button class="btn btn-danger" type="reset">Reset</button>
                        </div><br>
                        <div>
                            <table class="table table-striped" style="width: 90%;" id="inputTable1">
                                <thead>
                                    <tr>
                                        <th>SKU</th>
                                        <th>Product Name</th>
                                        <th>Size US</th>
                                        <th>Quantity</th>
                                        <th>Item Cost</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td><input type="text" name="field1[]" class="form-control"></td>
                                        <td><input type="text" name="field2[]" class="form-control"></td>
                                        <td><input type="text" name="field3[]" class="form-control"></td>
                                        <td><input type="number" name="field4[]" class="form-control"></td>
                                        <td><input type="text" name="field5[]" class="form-control"></td>
                                        <td><button style="width: 75px;" type="button" class="btn btn-primary" id="addRow1">ADD</button></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </form><br>
                    <div>
                        <h2>From Supplier</h2>
                        <a href="/returned">haha</a>
                        <table class="table table-striped" style="width: 90%;">
                            <thead>
                                <tr>
                                <th>Invoice</th>
                                <th>Amount</th>
                                <th>Remarks</th>
                                <th>Date</th>
                                </tr>
                            </thead>
                            <tbody>
                                <% data.fromSupData.forEach(row => { %>
                                <tr>
                                    <td><%= row.invoice %></td>
                                    <td><%= row.amount %></td>
                                    <td><%= row.remarks %></td>
                                    <td><%= row.date ? row.date.toISOString().slice(0,10) : '' %></td>
                                </tr>
                                <% }); %>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            <script>
                $(document).ready(function() {
                // Add a new row to the first table
                $("#addRow").click(function() {
                    let newRow = `<tr>
                            <td><input type="text" name="field1[]" class="form-control"></td>
                            <td><input type="text" name="field2[]" class="form-control"></td>
                            <td><input type="text" name="field3[]" class="form-control"></td>
                            <td><input type="number" name="field4[]" class="form-control"></td>
                            <td><input type="text" name="field5[]" class="form-control"></td>
                            <td><button type="button" class="btn btn-danger btn-sm removeRow">Remove</button></td>
                        </tr>`;
                    $("#inputTable tbody").append(newRow);
                });

                // Remove a row from the first table
                $("#inputTable").on("click", ".removeRow", function() {
                    $(this).closest("tr").remove();
                });

                // Add a new row to the second table
                $("#addRow1").click(function() {
                    let newRow = `<tr>
                            <td><input type="text" name="field1[]" class="form-control"></td>
                            <td><input type="text" name="field2[]" class="form-control"></td>
                            <td><input type="text" name="field3[]" class="form-control"></td>
                            <td><input type="text" name="field4[]" class="form-control"></td>
                            <td><input type="text" name="field5[]" class="form-control"></td>
                            <td><button type="button" class="btn btn-danger btn-sm removeRow1">Remove</button></td>
                        </tr>`;
                    $("#inputTable1 tbody").append(newRow);
                });

                // Remove a row from the second table
                $("#inputTable1").on("click", ".removeRow1", function() {
                    $(this).closest("tr").remove();
                });
            });
            </script>
        </main>
    </body>
</html>