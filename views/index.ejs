<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
    <title>Home-Dashboard</title>
    <style>
        main {
        padding-left: 280px;
        position: relative;
        }

        .chart-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr); /* Two columns */
            gap: 20px;
            padding: 20px;
        }

        .chart-container {
            width: 100%;
            max-width: 600px;
            margin: auto;
            height: 400px;
        }
        
        #a {
            margin: 0.5rem 1rem;
        }

        h1 {
            padding-top: 100px;
        }
        
        .active-container {
            padding: 20px 40px 20px 20px;
        }

        .active-container-form {
            box-shadow: 0 4px 8px;
            border-radius: 5px;
            padding: 20px;
            height: 65vh;
        }

        .table-container {
            display: flex;
            flex-wrap: wrap; /* Allows tables to wrap into new rows */
            gap: 20px; /* Space between tables */
            width: 100%;
            max-height: calc(65vh - 90px); /* Set a fixed or maximum height */
            overflow: auto;
        }

        .table-container .table {
            flex: 1 1 300px; /* Grow to fill space, shrink to 300px, initial width 300px */
            min-width: 200px; /* Minimum width to prevent tables from getting too small */
            max-width: 100%; /* Ensures tables donâ€™t exceed the container width */
        }
    </style>
</head>
<body class="main-contents">
    <%- include('partials/nav'); %>
    <main class="main-content">
        <div><h1>Dashboard</h1></div>
            <div style="width: 90%; margin: auto; padding: 20px;">
              <h1>Sales Dashboard</h1>
              <div style="display: flex; justify-content: space-around; flex-wrap: wrap; gap: 20px;">
                <!-- Bar Chart -->
                <div style="width: 45%;">
                  <canvas id="barChart"></canvas>
                </div>
                <!-- Line Chart -->
                <div style="width: 45%;">
                  <canvas id="lineChart"></canvas>
                </div>
                <!-- Pie Chart -->
                <div style="width: 45%;">
                  <canvas id="pieChart"></canvas>
                </div>
              </div>
            </div>
          
            <script>
              // Example Data for Charts
              const exampleData = {
                bar: {
                  labels: ['January', 'February', 'March', 'April', 'May'],
                  datasets: [{
                    label: 'Monthly Sales',
                    data: [5000, 4000, 3000, 7000, 8000],
                    backgroundColor: ['#4CAF50', '#FFC107', '#FF5722', '#03A9F4', '#9C27B0']
                  }]
                },
                line: {
                  labels: ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday'],
                  datasets: [{
                    label: 'Weekly Earnings',
                    data: [200, 450, 700, 300, 800],
                    borderColor: '#03A9F4',
                    fill: false,
                    tension: 0.1
                  }]
                },
                pie: {
                  labels: ['Online', 'In-Store', 'Wholesale'],
                  datasets: [{
                    data: [50, 30, 20],
                    backgroundColor: ['#FF6384', '#36A2EB', '#FFCE56']
                  }]
                }
              };
          
              // Create Bar Chart
              new Chart(document.getElementById('barChart'), {
                type: 'bar',
                data: exampleData.bar,
                options: {
                  responsive: true,
                  plugins: {
                    legend: { position: 'top' },
                    title: { display: true, text: 'Monthly Sales' }
                  }
                }
              });
          
              // Create Line Chart
              new Chart(document.getElementById('lineChart'), {
                type: 'line',
                data: exampleData.line,
                options: {
                  responsive: true,
                  plugins: {
                    legend: { position: 'top' },
                    title: { display: true, text: 'Weekly Earnings' }
                  }
                }
              });
          
              // Create Pie Chart
              new Chart(document.getElementById('pieChart'), {
                type: 'pie',
                data: exampleData.pie,
                options: {
                  responsive: true,
                  plugins: {
                    legend: { position: 'top' },
                    title: { display: true, text: 'Sales Distribution' }
                  }
                }
              });
            </script>

<div style="width: 80%; margin: auto; padding: 20px;">
    <h1>Stock Level Dashboard</h1>
    <div>
      <!-- Stock Level Chart -->
      <canvas id="stockAlertChart"></canvas>
    </div>
  </div>

  <script>
    // Example Stock Data
    const products = ['Product A', 'Product B', 'Product C', 'Product D', 'Product E'];
    const stockLevels = [120, 15, 45, 5, 200]; // Example stock levels
    const lowStockThreshold = 30; // Threshold for low stock alerts

    // Generate colors for stock levels
    const backgroundColors = stockLevels.map(stock => 
      stock < lowStockThreshold ? '#FF5722' : '#4CAF50' // Red for low stock, green for sufficient stock
    );

    const borderColors = stockLevels.map(stock =>
      stock < lowStockThreshold ? '#E64A19' : '#388E3C'
    );

    // Stock Level Chart Configuration
    new Chart(document.getElementById('stockAlertChart'), {
      type: 'bar',
      data: {
        labels: products,
        datasets: [{
          label: 'Stock Level',
          data: stockLevels,
          backgroundColor: backgroundColors,
          borderColor: borderColors,
          borderWidth: 1
        }]
      },
      options: {
        responsive: true,
        plugins: {
          legend: {
            display: false // Hide legend
          },
          title: {
            display: true,
            text: 'Stock Levels by Product (Low Stock Alert)'
          },
          tooltip: {
            callbacks: {
              label: function(context) {
                const stock = context.raw;
                return `${context.label}: ${stock} units` + (stock < lowStockThreshold ? ' (Low Stock!)' : '');
              }
            }
          }
        },
        scales: {
          x: {
            title: {
              display: true,
              text: 'Products'
            }
          },
          y: {
            beginAtZero: true,
            title: {
              display: true,
              text: 'Quantity'
            }
          }
        }
      }
    });
  </script>
    </main>
</body>
</html>
